Plan: Multi-System Health Diagnosis with Budget Hardware
Build 3 specialized ML models (ECG arrhythmia, skin lesion detection, posture analysis) while maximizing reuse of your existing 95%-accurate tabular classifier, LSTM autoencoder, and engine infrastructure. Leverage your hardware: MAX30102, AD8232, MLX90614, DHT11, Camera, Raspberry Pi Pico W.

Steps
Refactor existing tabular classifier into specialized cardiovascular/respiratory models using feature subsets from ml/models/tabular_classifier.py - split 14-feature model into cardio-specific (HR, BP, HRV) and respiratory-specific (SpO2, RR) versions, retrain on filtered features, integrate into models/engine_cardiovascular.py and models/engine_respiratory.py replacing current LSTM encoder with faster MLP

Create ECG arrhythmia detector by adapting ml/models/ts_autoencoder.py Encoder architecture - change input_channels=1 for single-lead AD8232 data, add classification head for 5 classes (Normal/AFib/PVC/VT/Bradycardia), train using ml/train/train_ae.py pattern on MIT-BIH Arrhythmia Database (download from PhysioNet), use ml/data/ts_dataset.py for 5-second windowing (1250 samples @ 250Hz), integrate into cardiovascular engine as secondary validation

Build skin lesion detector using lightweight CNN (MobileNetV3 or EfficientNet-B0) - create ml/models/skin_classifier.py for binary/multi-class classification, train using ml/train/train_tabular_classifier.py pattern adapted for images, use HAM10000 dataset (10,015 dermatoscopic images, download from Harvard Dataverse), create ml/data/skin_loader.py with torchvision transforms, replace rule-based models/engine_derma.py logic with CNN inference

Implement pose-based posture analyzer using MediaPipe Pose for keypoint extraction - create ml/models/posture_analyzer.py wrapping MediaPipe with custom angle/asymmetry calculations (shoulder horizontal offset, spine curvature via C7-L5-S1 angles), compute scoliosis risk from lateral deviation, add optional LSTM for gait velocity analysis from sequential frames, enhance models/engine_posturerisk.py with ML confidence scores while keeping existing rule thresholds as fallback

Create unified sensor ingestion API at POST /api/sensors/stream accepting JSON from Raspberry Pi Pico W with all sensor readings (ECG array, PPG waveform, temp, SpO2, HR, camera frame as base64), implement preprocessing pipeline splitting data to appropriate models (ECG→arrhythmia detector, camera→skin/posture, vitals→cardio/respiratory MLPs), return comprehensive 5-system report using existing models/aggregator_hri.py pattern

Add Raspberry Pi Pico W firmware in iot/pico_firmware.py using MicroPython to read MAX30102 (I2C), AD8232 (ADC), MLX90614 (I2C), DHT11 (GPIO), batch sensor data into 5-second windows, POST to FastAPI via WiFi every 5 seconds, implement ring buffer for continuous ECG streaming (500 samples rolling window)

Further Considerations
Dataset acquisition priority - MIT-BIH (free, PhysioNet) for ECG, HAM10000 (free, Dataverse) for skin, or use transfer learning with ImageNet weights? Fallback: synthetic ECG via neurokit2 library if download constrained

Model deployment - Run all models on backend GPU or edge inference on Raspberry Pi? Recommend: ECG/MLP on Pico W (TFLite Micro), skin/posture on backend (too heavy for edge)

Real-time streaming architecture - Add WebSocket (fastapi.WebSocket) for bidirectional communication or stick with polling REST API? WebSocket reduces latency for arrhythmia alerts

Training resource allocation - Existing vitals dataset (200k) sufficient for cardio/respiratory, but ECG needs balanced classes - augment with time-shifting/noise injection to prevent overfitting on MIT-BIH's 48 patients
