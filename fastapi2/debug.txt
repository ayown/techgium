(venv) PS C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\fastapi2> python scripts/headless_runner.py
[2026-02-14T04:50:17.941942+00:00] INFO [app.core.hardware.manager] HardwareManager singleton created

[1/5] Initializing Hardware...
[2026-02-14T04:50:17.941942+00:00] INFO [app.core.hardware.manager] ============================================================
[2026-02-14T04:50:17.941942+00:00] INFO [app.core.hardware.manager] HardwareManager starting up (Unified Architecture)
[2026-02-14T04:50:17.941942+00:00] INFO [app.core.hardware.manager] ============================================================
[2026-02-14T04:50:17.954776+00:00] INFO [app.core.hardware.drivers] ‚úÖ FaceDetector (Legacy) initialized
INFO: Created TensorFlow Lite XNNPACK delegate for CPU.
[2026-02-14T04:50:17.963315+00:00] INFO [app.core.hardware.drivers] ‚úÖ PoseLandmarker (Legacy) initialized
WARNING: All log messages before absl::InitializeLog() is called are written to STDERR
W0000 00:00:1771044617.967027 13004 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
[2026-02-14T04:50:17.969502+00:00] INFO [app.core.hardware.drivers] ‚úÖ FaceMesh initialized (478 landmarks)
W0000 00:00:1771044617.973747 11820 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
W0000 00:00:1771044617.992471 26340 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
W0000 00:00:1771044618.066139 28636 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
W0000 00:00:1771044618.084570 28636 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
[2026-02-14T04:50:20.605792+00:00] INFO [app.core.hardware.drivers] Camera 0 opened with threaded capture
[2026-02-14T04:50:20.605792+00:00] INFO [app.core.hardware.manager] ‚úÖ Camera 0 opened
[2026-02-14T04:50:20.609699+00:00] INFO [app.core.hardware.drivers] Connected to Seeed Radar Kit (MR60BHA2) on COM7
[2026-02-14T04:50:20.611300+00:00] INFO [app.core.hardware.manager] ‚úÖ Radar connected on COM7
[2026-02-14T04:50:20.674213+00:00] INFO [app.core.hardware.drivers] Connected to ESP32 NodeMCU (Thermal MLX90640) on COM6
[2026-02-14T04:50:20.675319+00:00] INFO [app.core.hardware.manager] ‚úÖ Thermal connected on COM6
[2026-02-14T04:50:20.675319+00:00] INFO [app.core.extraction.base] CardiovascularExtractor initialized for cardiovascular
[2026-02-14T04:50:20.675319+00:00] INFO [app.core.extraction.base] CNSExtractor initialized for central_nervous_system
[2026-02-14T04:50:20.675319+00:00] INFO [app.core.extraction.base] SkeletalExtractor initialized for skeletal
[2026-02-14T04:50:20.675319+00:00] INFO [app.core.extraction.base] SkinExtractor initialized for skin
[2026-02-14T04:50:20.678656+00:00] INFO [app.core.extraction.base] PulmonaryExtractor initialized for pulmonary
[2026-02-14T04:50:20.678656+00:00] INFO [app.core.extraction.base] RenalExtractor initialized for renal
[2026-02-14T04:50:20.678656+00:00] INFO [app.core.extraction.base] EyeExtractor initialized for eyes
[2026-02-14T04:50:20.678656+00:00] INFO [app.core.extraction.base] NasalExtractor initialized for nasal
[2026-02-14T04:50:20.683868+00:00] INFO [app.core.hardware.manager] ‚úÖ All 8 extractors initialized
W0000 00:00:1771044620.684674 28508 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
[2026-02-14T04:50:20.686188+00:00] INFO [app.core.hardware.manager] ‚úÖ Continuous capture thread started
[2026-02-14T04:50:20.686188+00:00] INFO [app.core.hardware.manager] HardwareManager startup complete
- Camera: connected
- Radar: connected
- Thermal: connected

[2/5] Starting Scan for HEADLESS_20260214_102017...

üì∏ PHASE 1: Face Analysis (10s)
Please look at the camera...
[2026-02-14T04:50:20.686714+00:00] INFO [app.core.hardware.drivers] Driver-level recording started
W0000 00:00:1771044620.697588 16176 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
Scanning... Done!
[2026-02-14T04:50:30.761427+00:00] INFO [app.core.hardware.drivers] Driver-level recording stopped. Captured 298 frames.
‚úÖ Captured 298 face frames

üö∂ PHASE 2: Body Analysis (10s)
Please show your full body...
[2026-02-14T04:50:30.761427+00:00] INFO [app.core.hardware.drivers] Driver-level recording started
Scanning... Done!
[2026-02-14T04:50:40.836861+00:00] INFO [app.core.hardware.drivers] Driver-level recording stopped. Captured 302 frames.
‚úÖ Captured 302 body frames

[3/5] Aggregating Sensor Data (GLASS BOX VIEW)...
‚úÖ Collected 71 Radar samples
üîç Radar Logic:
- Input HR: [103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103, 103]
- Median HR: 103
‚úÖ Collected 24 Thermal samples
üîç Thermal Logic (Firmware Mode):
- Input Canthus: [31.46, 31.45, 31.38, 31.08, 30.83, 30.72, 31.75, 31.66, 31.15, 30.54, 30.53, 30.52, 30.37, 30.46, 30.42, 30.57, 30.49, 30.37, 30.34, 30.41, 30.37, 30.3, 30.3, 30.34]
- Valid Canthus (>25C): [31.46, 31.45, 31.38, 31.08, 30.83, 30.72, 31.75, 31.66, 31.15, 30.54, 30.53, 30.52, 30.37, 30.46, 30.42, 30.57, 30.49, 30.37, 30.34, 30.41, 30.37, 30.3, 30.3, 30.34]
- Median Canthus: 30.52

[4/5] Running Full Processing Pipeline (Extractors + Risk Engine)...
‚öôÔ∏è Processing Images (Body/Face)...
üîç Extracting Face Features from 298 frames...
üîç Extracting Body Pose from 302 frames...
‚öôÔ∏è Building Screening Request (Running 8 Extractors)...
üîç [10:20:50.354] [DEBUG] PULMONARY | respiration_rate : 20.700 breaths/min
üîç [10:20:50.355] [DEBUG] CARDIOVASCULAR | heart_rate : 108.000 bpm
[2026-02-14T04:50:50.355920+00:00] WARNING [app.core.extraction.cardiovascular] rPPG: Insufficient frames, need at least 10 seconds
üîç [10:20:50.355] [DEBUG] CARDIOVASCULAR | thermal_asymmetry : 0.292 delta_celsius
üîç [10:20:50.367] [DEBUG] SKIN | skin_temperature : 36.680 celsius
üîç [10:20:50.367] [DEBUG] SKIN | skin_temperature_max : 36.680 celsius
üîç [10:20:50.367] [DEBUG] SKIN | inflammation_index : 4.998 percent
üîç [10:20:50.368] [DEBUG] SKIN | face_mean_temperature : 29.035 celsius
üîç [10:20:50.368] [DEBUG] SKIN | thermal_stability : 1.400 delta_celsius
[2026-02-14T04:50:50.368391+00:00] WARNING [app.core.extraction.skin] Skin: High head rotation detected (Yaw: 13.5¬∞, Pitch: 10.7¬∞). Reducing asymmetry confidence.
üîç [10:20:50.368] [DEBUG] SKIN | thermal_asymmetry : 0.292 delta_celsius
üîç [10:20:50.379] [DEBUG] SKIN | texture_roughness : 2.002 glcm_contrast
üîç [10:20:50.461] [DEBUG] SKIN | skin_redness : 24.525 lab_deviation
üîç [10:20:50.461] [DEBUG] SKIN | skin_yellowness : 28.297 lab_deviation
üîç [10:20:50.461] [DEBUG] SKIN | color_uniformity : 0.343 entropy_inv
üîç [10:20:50.461] [DEBUG] SKIN | lesion_count : 0.000 count
[2026-02-14T04:50:50.461355+00:00] INFO [app.core.extraction.skin] Skin: Visual head pose estimation - Yaw: 13.5¬∞, Pitch: 10.7¬∞
[2026-02-14T04:50:50.463379+00:00] INFO [app.core.extraction.cns] Subject appears stationary, skipping gait analysis
üîç [10:20:50.463] [DEBUG] CENTRAL_NERVOUS_SYSTEM | gait_variability : 0.045 coefficient_of_variation
üîç [10:20:50.463] [DEBUG] CENTRAL_NERVOUS_SYSTEM | posture_entropy : 0.170 sample_entropy
[2026-02-14T04:50:50.463379+00:00] WARNING [app.core.extraction.cns] Insufficient visible wrist landmarks for tremor analysis
üîç [10:20:50.463] [DEBUG] CENTRAL_NERVOUS_SYSTEM | tremor_resting : 0.030 normalized_psd
üîç [10:20:50.463] [DEBUG] CENTRAL_NERVOUS_SYSTEM | tremor_postural : 0.030 normalized_psd
üîç [10:20:50.463] [DEBUG] CENTRAL_NERVOUS_SYSTEM | tremor_intention : 0.030 normalized_psd
üîç [10:20:50.468] [DEBUG] CENTRAL_NERVOUS_SYSTEM | cns_stability_score : 77.461 score_0_100
üîç [10:20:50.468] [DEBUG] CENTRAL_NERVOUS_SYSTEM | sway_amplitude_ap : 0.033 normalized_units
üîç [10:20:50.468] [DEBUG] CENTRAL_NERVOUS_SYSTEM | sway_amplitude_ml : 0.004 normalized_units
[2026-02-14T04:50:50.469780+00:00] INFO [app.core.extraction.cns] CNS extraction complete: 8 biomarkers, 6.4ms, 0 heel strikes detected
üîç [10:20:50.469] [DEBUG] CENTRAL_NERVOUS_SYSTEM | thermal_stress_gradient : 5.630 delta_celsius
üîç [10:20:50.475] [DEBUG] SKELETAL | gait_symmetry_ratio : 0.964 ratio
üîç [10:20:50.475] [DEBUG] SKELETAL | average_joint_rom : 0.140 radians
[2026-02-14T04:50:50.475212+00:00] WARNING [app.core.extraction.renal] RenalExtractor: No data sources available.
üîç [10:20:50.475] [DEBUG] RENAL | microcirculation_temp : 30.520 celsius
üîç [10:20:50.475] [DEBUG] RENAL | cold_extremity_flag : 1.000 flag
[2026-02-14T04:50:50.478932+00:00] WARNING [app.core.extraction.eyes] Low landmark visibility: 0.00
üîç [10:20:50.478] [DEBUG] EYES | blink_rate : 18.121 blinks_per_min
üîç [10:20:50.478] [DEBUG] EYES | blink_count : 3.000 count
üîç [10:20:50.483] [DEBUG] EYES | gaze_stability_score : 97.762 score_0_100
üîç [10:20:50.483] [DEBUG] EYES | fixation_duration : 200.000 ms
üîç [10:20:50.483] [DEBUG] EYES | saccade_frequency : 2.919 saccades_per_sec
üîç [10:20:50.484] [DEBUG] EYES | eye_symmetry : 0.950 ratio
üîç [10:20:50.486] [DEBUG] NASAL | nostril_occlusion_score : 0.000 score_0_1
üîç [10:20:50.486] [DEBUG] NASAL | respiratory_effort_index : 0.515 ratio
üîç [10:20:50.488] [DEBUG] NASAL | nasal_cycle_balance : 0.337 score_0_1
üß† invoking ScreeningService (Risk Engine + LLM)...
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
C:\Users\Swetanjana Maity\Desktop\kblndt\techgium\venv\Lib\site-packages\google\protobuf\symbol_database.py:55: UserWarning: SymbolDatabase.GetPrototype() is deprecated. Please use message_factory.GetMessageClass() instead. SymbolDatabase.GetPrototype() will be removed soon.
warnings.warn('SymbolDatabase.GetPrototype() is deprecated. Please '
[2026-02-14T04:51:23.688293+00:00] INFO [app.core.inference.risk_engine] RiskEngine initialized (basic confidence scoring)
[2026-02-14T04:51:23.689309+00:00] WARNING [app.core.llm.gemini_client] No Gemini API key provided - mock mode enabled
[2026-02-14T04:51:23.689825+00:00] INFO [app.core.agents.hf_client] HuggingFaceClient in mock mode (no API key or InferenceClient unavailable)
[2026-02-14T04:51:23.689825+00:00] INFO [app.core.llm.multi_llm_interpreter] MultiLLMInterpreter initialized with Sequential Quality Pipeline
[2026-02-14T04:51:23.689825+00:00] INFO [app.core.ml.anomaly_detector] SignalAnomalyDetector initialized (sklearn=True)
[2026-02-14T04:51:23.689825+00:00] INFO [app.core.validation.signal_quality] SignalQualityAssessor initialized WITH anomaly detection
[2026-02-14T04:51:23.689825+00:00] INFO [app.services.screening] Processing system: pulmonary with 1 biomarkers
[2026-02-14T04:51:23.691063+00:00] INFO [app.services.screening] Processing system: cardiovascular with 2 biomarkers
[2026-02-14T04:51:23.691806+00:00] INFO [app.services.screening] Processing system: skin with 11 biomarkers
[2026-02-14T04:51:23.691806+00:00] INFO [app.services.screening] Processing system: central_nervous_system with 9 biomarkers
[2026-02-14T04:51:23.691806+00:00] INFO [app.services.screening] Processing system: skeletal with 2 biomarkers
[2026-02-14T04:51:23.691806+00:00] INFO [app.services.screening] Processing system: renal with 2 biomarkers
[2026-02-14T04:51:23.691806+00:00] INFO [app.services.screening] Processing system: eyes with 6 biomarkers
[2026-02-14T04:51:23.691806+00:00] INFO [app.services.screening] Processing system: nasal with 3 biomarkers
[2026-02-14T04:51:23.691806+00:00] INFO [app.core.llm.multi_llm_interpreter] Risk score 32.3 triggers FULL 3-LLM pipeline (forced)
[2026-02-14T04:51:23.691806+00:00] INFO [app.core.llm.multi_llm_interpreter] Starting MultiLLM Phase 1 (Gemini)...
[2026-02-14T04:51:23.695837+00:00] WARNING [app.core.llm.multi_llm_interpreter] Phase 1 returned MOCK response
[2026-02-14T04:51:23.696715+00:00] INFO [app.services.screening] MultiLLM validation: mode=full_pipeline, passed=True
‚úÖ Processing Complete in 0.0s
üìä Result: moderate (Score: 32.3)

[5/5] Saving Detailed Logs...
[2026-02-14T04:51:23.696715+00:00] INFO [app.core.hardware.manager] HardwareManager shutting down...
[2026-02-14T04:51:23.735703+00:00] INFO [app.core.hardware.drivers] Camera capture thread stopped
[2026-02-14T04:51:24.055617+00:00] INFO [app.core.hardware.drivers] Camera closed
[2026-02-14T04:51:24.055617+00:00] INFO [app.core.hardware.drivers] Disconnected from Seeed Radar Kit (MR60BHA2)
[2026-02-14T04:51:24.059385+00:00] INFO [app.core.hardware.drivers] Disconnected from ESP32 NodeMCU (Thermal MLX90640)
[2026-02-14T04:51:24.059385+00:00] INFO [app.core.hardware.manager] HardwareManager shutdown complete